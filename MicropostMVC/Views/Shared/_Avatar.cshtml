@using MicropostMVC.Models
@using MicropostMVC.Controllers
@model UserModel

@{
    var avatarPath = UsersController.GetAvatarPath(Model);
    string filePath = Request.MapPath(avatarPath);
    if (!File.Exists(filePath))
    {
        avatarPath = UsersController.GetAvatarPath(new UserModel());
    }

    string classValue = "avatar";
    if (ViewData.ContainsKey("class"))
    {
        classValue = ViewData["class"].ToString();
    }
}
<img id="avatar_@Model.Id.Value"src="@Url.Content(avatarPath)" alt="@Model.Name" class="@classValue"/>
        