@{
    ViewBag.Title = "Users";
}

<!--
    <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/rx")" type="text/javascript"></script>
 -->
<script src="@Url.Content("~/Scripts/rx.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/rx.jquery.js")" type="text/javascript"></script>
    
<script type="text/javascript">
    jQuery(function () {
        var input, results; 
        input = $('#searchUsers')
            .keyupAsObservable()
            .select(function (e) {
                return $('#searchUsers').val();
            })
            .distinctUntilChanged(); 
        
        results = function (query) {
            return $.ajaxAsObservable({
                url: '/Users/Index', 
                data: { search: query }
            })
            .select(function (r) { return r.data; });
        }; 
        
        return input
            .select(results)
            .switchLatest()
            .subscribe(function (r) { return $('#searchResults').html(r); });
    });
</script>

</script>

<h2>Users</h2>

@Html.Label("Search")&nbsp;
@Html.TextBox("searchUsers")

<fieldset class="round block-area">
    
    <div id="searchResults">
    
    </div>

</fieldset>
